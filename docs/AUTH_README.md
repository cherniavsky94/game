````markdown
# üîê Authentication System

## –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

‚úÖ **Email/Password —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –≤—Ö–æ–¥**  
‚úÖ **Google OAuth –≤—Ö–æ–¥**  
‚úÖ **–ó–∞—â–∏—â–µ–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ –∏–≥—Ä–µ**  
‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–µ—Å—Å–∏–∏**  
‚úÖ **–ö–Ω–æ–ø–∫–∞ –≤—ã—Ö–æ–¥–∞ –∏–∑ –∞–∫–∫–∞—É–Ω—Ç–∞**  

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### 1. –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫

–ü—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç —ç–∫—Ä–∞–Ω –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Å:
- –§–æ—Ä–º–æ–π –≤—Ö–æ–¥–∞/—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ (email + password)
- –ö–Ω–æ–ø–∫–æ–π "Continue with Google"
- –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª–µ–º –º–µ–∂–¥—É Sign In / Sign Up

### 2. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ Email

1. –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç–µ—Å—å –Ω–∞ "Sign Up"
2. –í–≤–µ–¥–∏—Ç–µ email –∏ –ø–∞—Ä–æ–ª—å (–º–∏–Ω–∏–º—É–º 6 —Å–∏–º–≤–æ–ª–æ–≤)
3. –ù–∞–∂–º–∏—Ç–µ "Sign Up"
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ—á—Ç—É –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –∞–∫–∫–∞—É–Ω—Ç–∞
5. –ü–æ—Å–ª–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –≤–æ–π–¥–∏—Ç–µ —á–µ—Ä–µ–∑ "Sign In"

### 3. –í—Ö–æ–¥ —á–µ—Ä–µ–∑ Email

1. –í–≤–µ–¥–∏—Ç–µ email –∏ –ø–∞—Ä–æ–ª—å
2. –ù–∞–∂–º–∏—Ç–µ "Sign In"
3. –ò–≥—Ä–∞ –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

### 4. –í—Ö–æ–¥ —á–µ—Ä–µ–∑ Google

1. –ù–∞–∂–º–∏—Ç–µ "Continue with Google"
2. –í—ã–±–µ—Ä–∏—Ç–µ Google –∞–∫–∫–∞—É–Ω—Ç
3. –†–∞–∑—Ä–µ—à–∏—Ç–µ –¥–æ—Å—Ç—É–ø
4. –ò–≥—Ä–∞ –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

### 5. –í—ã—Ö–æ–¥ –∏–∑ –∞–∫–∫–∞—É–Ω—Ç–∞

–í –∏–≥—Ä–µ –Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "Sign Out" –≤ –ø—Ä–∞–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É.

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### Email/Password

–†–∞–±–æ—Ç–∞–µ—Ç –∏–∑ –∫–æ—Ä–æ–±–∫–∏ —Å –≤–∞—à–∏–º Supabase –ø—Ä–æ–µ–∫—Ç–æ–º.

### Google OAuth

–¢—Ä–µ–±—É–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏. –°–º. [GOOGLE_AUTH_SETUP.md](./GOOGLE_AUTH_SETUP.md)

–ö—Ä–∞—Ç–∫–æ:
1. –°–æ–∑–¥–∞–π—Ç–µ OAuth –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ Google Cloud Console
2. –î–æ–±–∞–≤—å—Ç–µ redirect URI: `https://sjhgglntqgeaikpehpbj.supabase.co/auth/v1/callback`
3. –í–∫–ª—é—á–∏—Ç–µ Google Provider –≤ Supabase Dashboard
4. –î–æ–±–∞–≤—å—Ç–µ Client ID –∏ Secret

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

**AuthUI** (`client/src/components/AuthUI.ts`)
- –ö—Ä–∞—Å–∏–≤—ã–π UI –¥–ª—è –≤—Ö–æ–¥–∞/—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
- –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ—Ä–º
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ—à–∏–±–æ–∫

**SupabaseClient** (`client/src/utils/SupabaseClient.ts`)
- –û–±–µ—Ä—Ç–∫–∞ –Ω–∞–¥ Supabase SDK
- –ú–µ—Ç–æ–¥—ã –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- –°–ª—É—à–∞—Ç–µ–ª—å –∏–∑–º–µ–Ω–µ–Ω–∏–π auth —Å–æ—Å—Ç–æ—è–Ω–∏—è

**AuthManager** (`client/src/utils/AuthManager.ts`)
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Å—Å–∏–∏ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ
- –ö–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è –º–µ–∂–¥—É UI –∏ Supabase

**main.ts** (`client/src/main.ts`)
- –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- –ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –≤—Ö–æ–¥–∞

### –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö

```
1. App Start
	‚Üì
2. AuthManager.initialize()
	‚Üì
3. Check existing session
	‚Üì
4a. Session exists ‚Üí Start Game
4b. No session ‚Üí Show AuthUI
	‚Üì
5. User signs in
	‚Üì
6. Supabase auth event
	‚Üì
7. AuthManager receives event
	‚Üì
8. Start Game
```

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- ‚úÖ –ü–∞—Ä–æ–ª–∏ —Ö–µ—à–∏—Ä—É—é—Ç—Å—è Supabase
- ‚úÖ JWT —Ç–æ–∫–µ–Ω—ã –¥–ª—è —Å–µ—Å—Å–∏–π
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤
- ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç CSRF
- ‚úÖ OAuth —á–µ—Ä–µ–∑ Supabase (–±–µ–∑–æ–ø–∞—Å–Ω—ã–π redirect)

## –•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

Supabase –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç —Ç–∞–±–ª–∏—Ü—É `auth.users` –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

–î–ª—è –∏–≥—Ä–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–∞–±–ª–∏—Ü—ã –∏–∑ Prisma schema:
- `User` - —Å–≤—è–∑—å —Å auth.users
- `Character` - –ø–µ—Ä—Å–æ–Ω–∞–∂–∏ –∏–≥—Ä–æ–∫–∞
- `InventoryItem` - –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –õ–æ–∫–∞–ª—å–Ω–æ

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∫–ª–∏–µ–Ω—Ç: `npm run dev`
2. –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:3000
3. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ email –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
5. –í–æ–π–¥–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É

### –í Gitpod

1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø–æ—Ä—Ç 3000 —á–µ—Ä–µ–∑ –ø–∞–Ω–µ–ª—å Ports
2. –°–ª–µ–¥—É–π—Ç–µ —Ç–µ–º –∂–µ —à–∞–≥–∞–º

## Troubleshooting

### "Supabase credentials not configured"

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ `client/.env`:
```env
VITE_SUPABASE_URL=https://sjhgglntqgeaikpehpbj.supabase.co
VITE_SUPABASE_ANON_KEY=your_anon_key
```

### Email –Ω–µ –ø—Ä–∏—Ö–æ–¥–∏—Ç

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–ø–∞–º
2. –í Supabase Dashboard ‚Üí Authentication ‚Üí Email Templates
3. –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –º–æ–∂–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å email confirmation

### Google OAuth –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

–°–º. [GOOGLE_AUTH_SETUP.md](./GOOGLE_AUTH_SETUP.md)

### –ò–≥—Ä–∞ –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ –≤—Ö–æ–¥–∞

1. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12)
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ—à–∏–±–∫–∏
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Supabase credentials –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. ‚úÖ –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Google OAuth (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
2. ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –∏ –≤—Ö–æ–¥
3. ‚úÖ –î–æ–±–∞–≤—å—Ç–µ –∏–≥—Ä–æ–≤—É—é –ª–æ–≥–∏–∫—É –≤ GameScene
4. ‚úÖ –°–≤—è–∂–∏—Ç–µ –∏–≥—Ä–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º —á–µ—Ä–µ–∑ Prisma

## API Reference

### AuthManager

```typescript
const authManager = AuthManager.getInstance();

// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
const isAuth = authManager.getAuthStatus();

// –ü–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
const user = await authManager.getCurrentUser();

// –í—ã–π—Ç–∏
await authManager.signOut();
```

### SupabaseClient

```typescript
const supabase = SupabaseClient.getInstance();

// Email/Password
await supabase.signUp(email, password);
await supabase.signIn(email, password);

// Google OAuth
await supabase.signInWithGoogle();

// –û–±—â–µ–µ
await supabase.signOut();
const session = await supabase.getSession();
const user = await supabase.getUser();
```

---

**–ì–æ—Ç–æ–≤–æ!** –°–∏—Å—Ç–µ–º–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç. üéâ

````
